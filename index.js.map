{"version":3,"file":"index.js","sources":["../src/js/work-together.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nfunction post(userEmail, userText) {\n    return axios.post('https://portfolio-js.b.goit.study/api/requests', {\n  \"email\": userEmail,\n  \"comment\": userText\n})\n}\n\nconst form = document.querySelector(\".work-together-form\");\nconst modalClose = document.querySelector(\".modal-close\");\nconst modal = document.querySelector(\".backdrop\");\nconst emailInput = document.getElementById(\"email\");\nconst iconSuccess = document.querySelector(\".success-filled\");\nconst invalidEmail = document.querySelector(\".invalid-email\");\n\nform.addEventListener(\"submit\", handleSubmit);\n\nemailInput.addEventListener(\"input\", mailValidation);\n\nmodalClose.addEventListener(\"click\", closeModal);\nmodal.addEventListener(\"click\", closeBackdrop)\ndocument.addEventListener(\"keydown\", closeEsc);\n\n\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    const userEmail = event.target.email.value.trim();\n    const userMessage = event.target.message.value.trim();\n    iconSuccess.classList.add(\"visually-hidden\");\n    try {\n        const response = await post(userEmail, userMessage);\n        if (response.status === 201) {\n            form.reset();\n            openModal(response.data.title, response.data.message);\n            emailInput.classList.remove(\"valid\"); /* ************************** */\n        }\n    } catch (error) {\n        console.log(error.message);\n        showErrorMessange();\n    }\n}\n\nfunction mailValidation() {\n    if (!(emailInput.validity.valid)) {\n        console.log(\"nope\");\n        emailInput.classList.add(\"no-valid\");\n        invalidEmail.classList.remove(\"visually-hidden\");\n        iconSuccess.classList.add(\"visually-hidden\");\n\n        if (emailInput.value.trim() === \"\") {\n            invalidEmail.classList.add(\"visually-hidden\");\n        }\n    } else {\n        invalidEmail.classList.add(\"visually-hidden\");\n        emailInput.classList.remove(\"no-valid\");\n        iconSuccess.classList.remove(\"visually-hidden\");\n    }\n}\n\nfunction openModal(title, message) {\n    modal.classList.remove(\"visually-hidden\");\n    document.body.classList.add(\"no-scroll\");\n    document.querySelector(\".modal-title\").innerHTML = title;\n    document.querySelector(\".modal-text\").innerHTML = message;\n}\n\nfunction closeModal() {\n    modal.classList.add(\"visually-hidden\");\n    document.body.classList.remove(\"no-scroll\");\n}\n\nfunction closeBackdrop(event) {\n    if (event.target.classList.contains(\"backdrop\")) {\n    closeModal();\n  }\n}\n\nfunction closeEsc(event) {\n    if (event.key === \"Escape\" && !(modal.classList.contains(\"visually-hidden\"))) {\n        closeModal();\n    }\n}\n\nfunction showErrorMessange() {\n    iziToast.show({\n        title: \"An error occurred!\",\n        message: \"Correct the entered data and send again\",\n        position: \"center\"\n    });\n}\n\n"],"names":["post","userEmail","userText","axios","form","modalClose","modal","emailInput","iconSuccess","invalidEmail","handleSubmit","mailValidation","closeModal","closeBackdrop","closeEsc","event","userMessage","response","openModal","error","showErrorMessange","title","message","iziToast"],"mappings":"6vBAKA,SAASA,EAAKC,EAAWC,EAAU,CAC/B,OAAOC,EAAM,KAAK,iDAAkD,CACtE,MAASF,EACT,QAAWC,CACb,CAAC,CACD,CAEA,MAAME,EAAO,SAAS,cAAc,qBAAqB,EACnDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAQ,SAAS,cAAc,WAAW,EAC1CC,EAAa,SAAS,eAAe,OAAO,EAC5CC,EAAc,SAAS,cAAc,iBAAiB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE5DL,EAAK,iBAAiB,SAAUM,CAAY,EAE5CH,EAAW,iBAAiB,QAASI,CAAc,EAEnDN,EAAW,iBAAiB,QAASO,CAAU,EAC/CN,EAAM,iBAAiB,QAASO,CAAa,EAC7C,SAAS,iBAAiB,UAAWC,CAAQ,EAI7C,eAAeJ,EAAaK,EAAO,CAC/BA,EAAM,eAAc,EACpB,MAAMd,EAAYc,EAAM,OAAO,MAAM,MAAM,OACrCC,EAAcD,EAAM,OAAO,QAAQ,MAAM,OAC/CP,EAAY,UAAU,IAAI,iBAAiB,EAC3C,GAAI,CACA,MAAMS,EAAW,MAAMjB,EAAKC,EAAWe,CAAW,EAC9CC,EAAS,SAAW,MACpBb,EAAK,MAAK,EACVc,EAAUD,EAAS,KAAK,MAAOA,EAAS,KAAK,OAAO,EACpDV,EAAW,UAAU,OAAO,OAAO,EAE1C,OAAQY,EAAO,CACZ,QAAQ,IAAIA,EAAM,OAAO,EACzBC,GACH,CACL,CAEA,SAAST,GAAiB,CAChBJ,EAAW,SAAS,OAUtBE,EAAa,UAAU,IAAI,iBAAiB,EAC5CF,EAAW,UAAU,OAAO,UAAU,EACtCC,EAAY,UAAU,OAAO,iBAAiB,IAX9C,QAAQ,IAAI,MAAM,EAClBD,EAAW,UAAU,IAAI,UAAU,EACnCE,EAAa,UAAU,OAAO,iBAAiB,EAC/CD,EAAY,UAAU,IAAI,iBAAiB,EAEvCD,EAAW,MAAM,KAAI,IAAO,IAC5BE,EAAa,UAAU,IAAI,iBAAiB,EAOxD,CAEA,SAASS,EAAUG,EAAOC,EAAS,CAC/BhB,EAAM,UAAU,OAAO,iBAAiB,EACxC,SAAS,KAAK,UAAU,IAAI,WAAW,EACvC,SAAS,cAAc,cAAc,EAAE,UAAYe,EACnD,SAAS,cAAc,aAAa,EAAE,UAAYC,CACtD,CAEA,SAASV,GAAa,CAClBN,EAAM,UAAU,IAAI,iBAAiB,EACrC,SAAS,KAAK,UAAU,OAAO,WAAW,CAC9C,CAEA,SAASO,EAAcE,EAAO,CACtBA,EAAM,OAAO,UAAU,SAAS,UAAU,GAC9CH,GAEJ,CAEA,SAASE,EAASC,EAAO,CACjBA,EAAM,MAAQ,UAAY,CAAET,EAAM,UAAU,SAAS,iBAAiB,GACtEM,GAER,CAEA,SAASQ,GAAoB,CACzBG,EAAS,KAAK,CACV,MAAO,qBACP,QAAS,0CACT,SAAU,QAClB,CAAK,CACL"}